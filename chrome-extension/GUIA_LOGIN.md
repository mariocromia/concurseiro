# ğŸ” Guia de Login - ExtensÃ£o Concurseiro

## âœ¨ Nova Funcionalidade: Login Direto na ExtensÃ£o!

Agora vocÃª pode fazer login **diretamente na extensÃ£o** sem precisar do app web aberto!

---

## ğŸš€ Como Fazer Login

### Passo 1: Instalar a ExtensÃ£o

1. Abra o Chrome
2. Acesse: `chrome://extensions/`
3. Ative o **Modo do desenvolvedor**
4. Clique em **Carregar sem compactaÃ§Ã£o**
5. Selecione a pasta: `chrome-extension/`

### Passo 2: Fazer Login

1. **Clique no Ã­cone** da extensÃ£o Concurseiro
2. VocÃª verÃ¡ a **tela de login**:
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    Concurseiro         â”‚
   â”‚                        â”‚
   â”‚    FaÃ§a Login          â”‚
   â”‚    Entre com sua       â”‚
   â”‚    conta para          â”‚
   â”‚    sincronizar         â”‚
   â”‚                        â”‚
   â”‚    E-mail:             â”‚
   â”‚    [_____________]     â”‚
   â”‚                        â”‚
   â”‚    Senha:              â”‚
   â”‚    [_____________]     â”‚
   â”‚                        â”‚
   â”‚    [Entrar]            â”‚
   â”‚                        â”‚
   â”‚        ou              â”‚
   â”‚                        â”‚
   â”‚    [Abrir App Web]     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

3. **Digite seu e-mail e senha**
   - Use as mesmas credenciais do app web
   - Se nÃ£o tem conta, clique em "Abrir App Web" para se cadastrar

4. **Clique em "Entrar"**
   - Um loader aparecerÃ¡ enquanto autentica
   - Se der erro, uma mensagem serÃ¡ exibida

5. **âœ… Pronto!**
   - VocÃª verÃ¡ a tela principal da extensÃ£o
   - O Ã­cone mostrarÃ¡ suas estatÃ­sticas

---

## ğŸ¯ ApÃ³s o Login

Quando autenticado, vocÃª terÃ¡ acesso a:

### Tela Principal da ExtensÃ£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Concurseiro            [Sair]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ğŸ”¥ SessÃ£o de Estudo Ativa      â”‚
â”‚     ResoluÃ§Ã£o de QuestÃµes       â”‚
â”‚     Tempo restante: 45min       â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚   ğŸ“š        ğŸ“        ğŸ¯        â”‚
â”‚   2h30     15        85%        â”‚
â”‚   Hoje   Capturadas  Foco       â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  [Abrir App]  [ConfiguraÃ§Ãµes]   â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  Capturas Recentes              â”‚
â”‚  â€¢ QuestÃ£o de Dir. Const...     â”‚
â”‚  â€¢ AnotaÃ§Ã£o sobre...            â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Funcionalidades DisponÃ­veis

âœ… **Ver sessÃ£o de estudo ativa**
- Tipo de estudo
- Tempo restante
- Status (ativo/inativo)

âœ… **EstatÃ­sticas em tempo real**
- Tempo estudado hoje
- QuestÃµes capturadas
- Score de foco

âœ… **Capturas recentes**
- Ãšltimas questÃµes salvas
- AnotaÃ§Ãµes

âœ… **BotÃ£o de Logout**
- Canto superior direito
- Desconecta e limpa dados

---

## ğŸ”’ SeguranÃ§a

### Como Funciona a AutenticaÃ§Ã£o

1. **VocÃª digita** e-mail e senha
2. **ExtensÃ£o envia** para o Supabase (conexÃ£o segura HTTPS)
3. **Supabase valida** as credenciais
4. **Retorna um token** de acesso
5. **ExtensÃ£o salva** o token localmente (criptografado)
6. **Background script** usa o token para acessar dados

### Dados Armazenados

A extensÃ£o armazena apenas:
```javascript
{
  supabase_session: {
    access_token: "xxx",
    refresh_token: "xxx",
    user: { id: "xxx", email: "xxx" }
  }
}
```

**SeguranÃ§a:**
- âœ… Senha NUNCA Ã© armazenada
- âœ… Tokens sÃ£o criptografados
- âœ… ComunicaÃ§Ã£o via HTTPS
- âœ… Row Level Security (RLS) no banco

---

## ğŸ”„ SincronizaÃ§Ã£o com App Web

### Login na ExtensÃ£o â†’ App Web

Quando vocÃª faz login na extensÃ£o:
1. âœ… Dados sÃ£o sincronizados automaticamente
2. âœ… SessÃµes de estudo sÃ£o detectadas
3. âœ… Capturas aparecem no app web
4. âœ… EstatÃ­sticas sÃ£o atualizadas

### Login no App Web â†’ ExtensÃ£o (Opcional)

Se preferir fazer login no app web:

**MÃ©todo 1: Auto-Sync (Futuro)**
- Plugin serÃ¡ adicionado ao app
- Sincroniza automaticamente

**MÃ©todo 2: Manual (Atual)**
1. FaÃ§a login no app web
2. Clique na extensÃ£o
3. FaÃ§a login com mesmas credenciais

---

## âŒ Erros Comuns e SoluÃ§Ãµes

### "E-mail ou senha incorretos"

**Causa:** Credenciais invÃ¡lidas

**SoluÃ§Ã£o:**
1. Verifique se digitou corretamente
2. Certifique-se que Ã© a mesma conta do app web
3. Se esqueceu a senha:
   - Clique em "Abrir App Web"
   - Clique em "Esqueci minha senha"

### "Por favor, confirme seu e-mail primeiro"

**Causa:** E-mail nÃ£o confirmado

**SoluÃ§Ã£o:**
1. Acesse sua caixa de entrada
2. Procure e-mail do Supabase
3. Clique no link de confirmaÃ§Ã£o
4. Tente fazer login novamente

### "Erro ao fazer login. Tente novamente."

**Causa:** Problema de conexÃ£o ou servidor

**SoluÃ§Ã£o:**
1. Verifique sua internet
2. Tente novamente em alguns segundos
3. Se persistir, verifique se o app web estÃ¡ funcionando

### ExtensÃ£o nÃ£o salva login

**Causa:** Cookies/Storage bloqueados

**SoluÃ§Ã£o:**
1. VÃ¡ em `chrome://settings/content/cookies`
2. Verifique se "Permitir cookies" estÃ¡ ativado
3. Adicione exceÃ§Ã£o para `chrome-extension://`
4. Recarregue a extensÃ£o

---

## ğŸ”“ Fazer Logout

### MÃ©todo 1: Pelo Popup

1. Clique no Ã­cone da extensÃ£o
2. Clique no botÃ£o **Sair** (canto superior direito)
3. âœ… Deslogado!

### MÃ©todo 2: Pelas ConfiguraÃ§Ãµes

1. Clique direito no Ã­cone da extensÃ£o
2. Selecione "OpÃ§Ãµes"
3. Clique em "Sair da Conta"

### O que Acontece ao Fazer Logout

- âŒ Token de acesso Ã© removido
- âŒ SessÃ£o Ã© limpa
- âŒ Bloqueio de sites Ã© desativado
- âŒ Realtime Ã© desconectado
- âœ… VocÃª volta para a tela de login

**Nota:** Suas questÃµes e dados permanecem salvos no banco de dados!

---

## ğŸ§ª Testar o Login

### Passo a Passo

1. **Instale a extensÃ£o**
   ```
   chrome://extensions/ â†’ Carregar sem compactaÃ§Ã£o
   ```

2. **Clique no Ã­cone da extensÃ£o**
   - Deve aparecer a tela de login

3. **Digite suas credenciais**
   - E-mail: seu@email.com
   - Senha: â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢

4. **Clique em "Entrar"**
   - Loader aparece
   - Aguarde autenticaÃ§Ã£o

5. **Verifique os logs** (opcional)
   ```
   chrome://extensions/ â†’ Service Worker (inspect) â†’ Console
   ```

   Deve aparecer:
   ```
   [Popup] Initializing...
   [Popup] Checking authentication...
   [Popup] Attempting login...
   [Popup] Login successful!
   [Extension] ğŸ” New session received!
   [Extension] âœ… User authenticated: xxx-xxx-xxx
   ```

6. **Teste a funcionalidade**
   - Inicie uma sessÃ£o no Timer (app web)
   - ExtensÃ£o deve detectar e mostrar notificaÃ§Ã£o
   - Badge deve mostrar "ğŸ”¥"

---

## ğŸ“Š Logs de Debug

### Ver Logs do Popup

1. Clique no Ã­cone da extensÃ£o
2. Clique direito na janela do popup
3. Selecione **Inspecionar**
4. VÃ¡ na aba **Console**

**Logs esperados:**
```
[Popup] Script loaded, waiting for Supabase...
[Popup] Initializing...
[Popup] Checking authentication...
[Popup] User is not authenticated â†’ Tela de login
```

**ApÃ³s login:**
```
[Popup] Attempting login...
[Popup] Login successful!
[Popup] User is authenticated
```

### Ver Logs do Background

1. VÃ¡ em `chrome://extensions/`
2. Encontre a extensÃ£o Concurseiro
3. Clique em **Service Worker (inspect)**
4. VÃ¡ na aba **Console**

**Logs esperados:**
```
Concurseiro Extension background script loaded!
[Extension] Auth session updated from popup
[Extension] ğŸ” New session received!
[Extension] âœ… User authenticated: abc-123-def
[Extension] ğŸ” Checking for active session...
```

---

## ğŸ¯ Checklist de Teste

Use este checklist para testar o login:

- [ ] ExtensÃ£o instalada
- [ ] Popup abre ao clicar no Ã­cone
- [ ] Tela de login aparece
- [ ] Campos de e-mail e senha funcionam
- [ ] BotÃ£o "Entrar" funciona
- [ ] Loader aparece durante autenticaÃ§Ã£o
- [ ] Mensagens de erro aparecem se credenciais invÃ¡lidas
- [ ] Tela principal aparece apÃ³s login bem-sucedido
- [ ] BotÃ£o "Sair" funciona
- [ ] Logout retorna para tela de login
- [ ] Logs mostram autenticaÃ§Ã£o correta

---

## ğŸš€ PrÃ³ximos Passos

ApÃ³s fazer login com sucesso:

1. âœ… **Inicie uma sessÃ£o de estudo** no app web
2. âœ… **Veja a notificaÃ§Ã£o** na extensÃ£o
3. âœ… **Tente acessar** um site bloqueado (ex: facebook.com)
4. âœ… **Capture uma questÃ£o** (botÃ£o direito â†’ "Adicionar ao Caderno")
5. âœ… **Verifique estatÃ­sticas** no popup

---

**VersÃ£o:** 1.0.0
**Data:** 04/10/2025
**Status:** âœ… Login Implementado e Funcionando!
